<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <title>Food</title>

    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            text-align: left;
            padding: 8px;
        }

        th {
            background-color: #D8C4B6;
        }

        tr:nth-child(even) {
            background-color: #F5EFE7;
        }

        .search-filter-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .search-input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 10px;
        }

        .category-filter {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 150px;
        }
    </style>

    <script>
        $(document).ready(function() {
            // Function to filter the table based on category
            $("#category-filter").change(function() {
                var category = $(this).val();

                // Show all rows if category is "All"
                if (category === "All") {
                    $("tbody tr").show();
                } else {
                    // Hide rows that don't match the selected category
                    $("tbody tr").hide();
                    $("tbody tr[data-category*='" + category + "']").show();
                }
            });

            // Function to search the table based on the input value
            $("#search-input").on("keyup", function() {
                var searchText = $(this).val().toLowerCase();

                // Filter rows based on search text
                $("tbody tr").filter(function() {
                    $(this).toggle($(this).text().toLowerCase().indexOf(searchText) > -1)
                });
            });
        });
    </script>
</head>
<body>
  <div class="logo">
    <img src="{{ url_for('static', filename='logo.png') }}" alt="FitmATE Logo">
  </div>
  <div class="navbar">
    <div>
        <a href="/">Home</a>
        <a href="/food">Food</a>
        <a href="/exercise">Exercise</a>
        <a href="/goal">Goal</a>
        <div class="dropdown">
            <button class="dropbtn">Records
                <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content">
              <a href="/records_goals">Goals</a>
              <a href="/dailyplan">Daily Plan</a>
            </div>
        </div>
    </div>
    <div class="dropdown">
      <button class="dropbtn"> {{ user['name'] }}
          <i class="fa fa-caret-down"></i>
      </button>
      <div class="dropdown-content dropdown-right">
          <a href="/profile">Profile</a>
          <a href="/logout">Logout</a>
      </div>
  </div>     
  </div>
    
  <h1>Welcome to the Food page!</h1>

  <div class="search-filter-container">
    <div>
      <input type="text" id="search-input" class="search-input" placeholder="Search food...">
    </div>
    <div>
      <select id="category-filter" class="category-filter">
        <option value="All">All</option>
        <option value="Dairy products">Dairy products</option>
        <option value="Fats">Fats, Oils, Shortenings</option>
        <option value="Meat">Meat</option>
        <option value="Poultry">Poultry</option>
        <option value="Vegetables A-E">Vegetables A-E</option>
        <option value="Vegetables F-P">Vegetables F-P</option>
        <option value="Vegetables R-Z">Vegetables R-Z</option>
        <option value="Fruits A-F">Fruits A-F</option>
        <option value="Fruits G-P">Fruits G-P</option>
        <option value="Fruits R-Z">Fruits R-Z</option>
        <option value="Breads, cereals, fastfood,grains">Breads, cereals, fastfood,grains</option>
        <option value="Jams, Jellies">Jams, Jellies</option>
        <option value="Seeds and Nuts">Seeds and Nuts</option>
        <option value="Drinks,Alcohol, Beverages">Drinks, Alcohol, Beverages</option>
      </select>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Food</th>
        <th>Measure</th>
        <th>Grams</th>
        <th>Calories</th>
        <th>Protein</th>
        <th>Fat</th>
        <th>SatFat</th>
        <th>Fiber</th>
        <th>Carbs</th>
        <th>Category</th>
      </tr>
    </thead>
    <tbody>
      {% for food in food_data %}
      <tr data-category="{{ food.Category }}">
        <td>{{ food.Food }}</td>
        <td>{{ food.Measure }}</td>
        <td>{{ food.Grams }}</td>
        <td>{{ food.Calories }}</td>
        <td>{{ food.Protein }}</td>
        <td>{{ food.Fat }}</td>
        <td>{{ food.SatFat }}</td>
        <td>{{ food.Fiber }}</td>
        <td>{{ food.Carbs }}</td>
        <td>{{ food.Category }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
